<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
<div id="app">
    <my-component></my-component>

</div>


<!-- 父组件模板-->
<template id="mycom">
    <div>
        <h2>我是父组件</h2>
        父组件的 数据: {{ msg}}
        <button @click="handleClickCom">点击改变父组件自己数据</button>

<!--        父组件是用子组件就是两个组件的接口-->
        <my-son
                :my-name="user.name"
                :my-age="user.age"
                :fruit="fruit"
        ></my-son>


        <second :fruit="fruit"></second>

    </div>
</template>

<!-- 子组件模板 -->
<template id="myson">
    <div>
        <h3>我是子组件</h3>
        <p>我是子组件数据: {{msg }}</p>
        <p>
            接受父组件的数据:{{myName}},{{MyAge}}
        </p>
        <p>
            水果: {{ myfruit }}
        </p>
        <p>
            <button @click="handleClick">点击改变name</button>
        </p>
    </div>
</template>

<script>

    // 1. 父组件向子组件传值(通过props传值)
    // 每一个组件都是封闭, 不能直接使用别的组件中的数据

    // 2. 父组件给子组件传递的数据分为: 传值, 传引用
    // js数据类型分两大类, 基本数据类型, 引用数据类型

    // 3. vue采用的是单向下行数据流,
    // 不能(你不要在)在子组件中直接修改父组件的传递过来数据
    // 父组件向子组件传递数据如果是传值(基本数据类型)子组件直接修改就会报错
    // 父组件向子组件传递数据是传引用(引用数据类型), 直接修改引用地址就会报错,
    // 如果不变内存地址,只是改变引用数据的属性值,不会报错,


    // 虽然不会报错,但是不要改:
    // 原因在于
    //  1. 不符合vue的单项下行数据流的思想
    //  2.  如果一旦修改所有使用父组件这个数据的子组件都会发生改变


    // 原则: 子组件不要(也不能)直接修改props接受的数据


    // 4. 子组件props的响应式
    // 响应式就是数据的改变会触发vue响应系统,vue会自动改变视图view
    // props 响应是就是当父组件数据发生改变时触发响应系统
    // 也就是重新像props传递最新的数据, 进而改变子组件的视图


    // 5. 子组件如果需要改变props中数据有不影响父组件和其他使用相同数据的组件
    // 将props接受的数据浅拷贝一份,赋值给自己的数据,然后就可以改变自己的数据了

    // 这中方式是一种解决问题的思路, 如果这么干了,你还不如自己定义数据呢
    // 父组件通过props传递数据就是希望当父组件数据改变是, 触发响应系统,改变子组件视图

    // (子组件)
    let MySon = {
        // props就表示子组件接受父组件的数据
        props:["myName","MyAge", "fruit"],
        template:`#myson`,
        data(){
            return {
                msg:'hello',
                myfruit: JSON.parse(JSON.stringify(this.fruit)),
                age: this.MyAge
            }
        },
        methods:{
            handleClick(){
                // console.log(this)
                // console.log(this.myName)
                // 修改基本数据类型值
                // this.myName = "李四"
                // this.fruit.name = "香蕉"
                // this.fruit = {name:"香蕉"}

                // 子组件修改自己的数据
                this.myfruit.name = "梨子"
            }
        }
    }

    // 我是二号子组件
    let Second = {
        props:["fruit"],
        template: `<div>
            <h4>二号子组件</h4>
            <div>父组件传递过来的数据:{{ fruit }}</div>
</div>`
    }

    // (父组件)
    let MyComponent = {
        template:`#mycom`,
        data(){
           return {
               msg:"hello",
               user:{
                   name:"张三",
                   age:18
               },
               fruit:{
                   name:"苹果",
                   price: 12
               }
           }
        },
        components:{
            MySon,Second
        },
        methods:{
            handleClickCom(){
                this.fruit.name = "香蕉"
            }
        }
    }


    // vue实例
    new Vue({
        el:"#app",
        data:{

        },
        components:{
            MyComponent
        }
    })
</script>
</body>
</html>